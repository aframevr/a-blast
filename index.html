<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>A-Shooter</title>
    <meta name="description" content="Room Scale A-Frame Demo">
    <script src="vendor/aframe.js"></script>
    <script src="build/build.js"></script>
    <script src="waves.js"></script>
  </head>
  <body>
    <a-scene debug="true" countdown="start: 05:00; value: 00:00" gamestate="health: 5000; wave: 0" gamestate-visuals="" decals="maxDecals: 30; src: #bulletDecal; size: 0.3" fog="color:#0c2e3a;density:0;far:250;near:0">
      <a-assets>
        <a-asset-item id="enemy0" src="https://feiss.github.io/a-shooter-assets/models/enemy0.json"></a-asset-item>
        <a-asset-item id="enemy1" src="https://feiss.github.io/a-shooter-assets/models/enemy1.json"></a-asset-item>
        <a-asset-item id="enemy2" src="https://feiss.github.io/a-shooter-assets/models/enemy2.json"></a-asset-item>
        <a-asset-item id="enemy3" src="https://feiss.github.io/a-shooter-assets/models/enemy3.json"></a-asset-item>
        <a-asset-item id="playerBullet" src="https://feiss.github.io/a-shooter-assets/models/player-bullet.json"></a-asset-item>
        <a-asset-item id="enemyBullet" src="https://feiss.github.io/a-shooter-assets/models/enemy-bullet.json"></a-asset-item>
        <img id="bulletDecal" src="https://feiss.github.io/a-shooter-assets/images/decal0.png" crossOrigin="anonymous">
        <img id="hurtImg" src="https://feiss.github.io/a-shooter-assets/images/damage.png" crossOrigin="anonymous">
        <img id="counterFont" src="https://feiss.github.io/a-shooter-assets/images/font.png" crossOrigin="anonymous">
        <audio id="backgroundMusic" src="https://fernandojsg.github.io/a-shooter-assets/sounds/music0.ogg" loop crossorigin="anonymous"></audio>
        <img id="fx1" src="https://feiss.github.io/a-shooter-assets/images/fx1.png" crossOrigin="anonymous">
        <img id="fx2" src="https://feiss.github.io/a-shooter-assets/images/fx2.png" crossOrigin="anonymous">
        <img id="fx3" src="https://feiss.github.io/a-shooter-assets/images/fx3.png" crossOrigin="anonymous">
        <img id="fx4" src="https://feiss.github.io/a-shooter-assets/images/fx4.png" crossOrigin="anonymous">
        <img id="fx5" src="https://feiss.github.io/a-shooter-assets/images/fx5.png" crossOrigin="anonymous">
        <img id="fx6" src="https://feiss.github.io/a-shooter-assets/images/fx6.png" crossOrigin="anonymous">
        <img id="fx7" src="https://feiss.github.io/a-shooter-assets/images/fx7.png" crossOrigin="anonymous">
        <img id="fx8" src="https://feiss.github.io/a-shooter-assets/images/fx8.png" crossOrigin="anonymous">
        <audio id="backgroundMusicOgg" src="https://feiss.github.io/a-shooter-assets/sounds/music0.ogg"  crossorigin="anonymous"></audio>
        <audio id="explosion0" src="https://feiss.github.io/a-shooter-assets/sounds/explosion0.ogg"  crossorigin="anonymous"></audio>
        <audio id="explosion1" src="https://feiss.github.io/a-shooter-assets/sounds/explosion1.ogg"  crossorigin="anonymous"></audio>
        <audio id="explosion2" src="https://feiss.github.io/a-shooter-assets/sounds/explosion2.ogg"  crossorigin="anonymous"></audio>
      </a-assets>

      <a-entity id="backgroundMusic" sound="src: #backgroundMusicOgg; autoplay: false; loop: true"></a-entity>
      <a-entity id="explosion0" sound="src:#explosion0"></a-entity>
      <a-entity id="explosion1" sound="src:#explosion1"></a-entity>
      <a-entity id="explosion2" sound="src:#explosion2"></a-entity>

      <a-entity light="color: #ffffff; groundColor: #79a8bb; intensity: 0.3; type: hemisphere"></a-entity>
      <a-entity position="0 50 0" light="intensity: 0.9; type: point"></a-entity>
      <a-entity position="0 -50 0" light="intensity: 0.5; type: point"></a-entity>

      <a-entity id="player"
        camera="userHeight: 1.6"
        wasd-controls
        look-controls
        shoot="direction: 0 0 -1; spaceKeyEnabled: true">
        <!-- sound="src: url(https://fernandojsg.github.io/a-shooter-assets/sounds/hit0.ogg); on: player-hit" -->
        <a-entity id="hurt"
          proxy_event="event: player-hit; dst:#hurt"
          geometry="primitive:sphere;radius:0.5;segmentsHeight:6;segmentsWidth:7"
          position="0 0 -0.2"
          rotation="0 90 0"
          material="shader: flat; side: back; transparent: true; opacity: 0; depthTest: false; src: #hurtImg">
          <a-animation id="player-hit-anim" attribute="material.opacity" to="1" from="0" begin="player-hit" direction="alternate" dur="200" repeat="1"></a-animation>
        </a-entity>
      </a-entity>

      <!-- Hands. -->
      <a-entity id="leftHand" shoot-controls="hand: left" weapon shoot></a-entity>
      <a-entity id="rightHand" shoot-controls="hand: right" weapon shoot></a-entity>

      <a-entity id="ring0" json-model="src:url(https://feiss.github.io/a-shooter-assets/models/ring.json); singleModel:true)" position="0 0 0" rotation="0 0 0" scale="1.3 1.3 1.3">
        <a-animation id="ring0anim" attribute="rotation" to="0 360 180" repeat="indefinite" dur="50000" easing="linear"></a-animation>
      </a-entity>

      <a-entity id="ring1" json-model="src:url(https://feiss.github.io/a-shooter-assets/models/ring.json); singleModel:true)" position="0 0 0" rotation="90 0 0">
        <a-animation id="ring1anim" attribute="rotation" to="90 360 180" repeat="indefinite" dur="30000" easing="linear"></a-animation>
      </a-entity>

      <a-entity id="background" json-model="src:url(https://feiss.github.io/a-shooter-assets/models/background.json);  singleModel:true; texturePath:url(https://feiss.github.io/a-shooter-assets/images/)" position="0 0 0"></a-entity>

      <a-entity id="border" json-model="src:url(https://feiss.github.io/a-shooter-assets/models/border.json);" position="0 0 0"></a-entity>

      <a-entity id="highscores"
        highscores
        visible = "false"
        position="3 1 -4"
        rotation="0 -65 0"></a-entity>

      <a-entity id="gamestateDebug"
        gamestate-debug
        position="-5 1 -3"
        rotation="0 65 0"></a-entity>

      <a-entity id="waveText"
        position="0 2 -4"
        scale="3 3 3"
        wave-text>
        <a-animation attribute="bmfont-text.opacity" direction="alternate" dur="2500" from="0" begin="wavetextchange" to="1" repeat="1"></a-animation>
      </a-entity>

      <a-sky color="#0c2e3a"></a-sky>
      <!--<a-entity id="sky"
        geometry="primitive: sphere; radius: 600;"
        material="shader: flat; color: #1a4d5f; fog: false; side: double; src: url(https://fernandojsg.github.io/a-shooter-assets/images/sky.jpg)"
      ></a-entity>-->

      <a-entity id="finished" visible="false">
        <a-entity id="message-group">
          <a-entity id="gameover-model" json-model="src:url(https://feiss.github.io/a-shooter-assets/models/gameover.json)"></a-entity>
          <a-entity id="welldone-model" json-model="src:url(https://feiss.github.io/a-shooter-assets/models/welldone.json)"></a-entity>
        </a-entity>
        <a-entity id="reset"
          collision-helper="radius: 0.7"
          json-model="src: url(https://feiss.github.io/a-shooter-assets/models/restart.json);"
          material="color: #f00; flatShading: true"
          position="0 0.5 -6">
        </a-entity>
      </a-entity>

      <a-entity id="mainmenu">
        <a-entity id="logo" json-model="src:url(https://feiss.github.io/a-shooter-assets/models/logo.json)" animate-message=""></a-entity>
        <a-entity id="start_enemy"
          enemy="name: enemy_start; canShoot: false"
          collision-helper="radius: 0.65"
          json-model="
          src: url(https://feiss.github.io/a-shooter-assets/models/enemy0.json);
          texturePath: url(https://feiss.github.io/a-shooter-assets/images/);
          singleModel: true"
          position="0 1.2 -7"
          scale="1.3 1.3 1.3">
        </a-entity>
      </a-entity>

      <a-entity
        position="-2.04 -0.32 -3.81"
        rotation="-14.54 25 0">
        <a-entity
          timer-counter="value: 00:00">
        </a-entity>
        <a-entity id="lifes-counter"
          position="0.07 -0.25 -0.01"
          gamestate-bind="health: lifes-counter.value"
          lifes-counter="value: 5">
        </a-entity>
      </a-entity>

      <a-entity
        position="1.5 -0.38 -4"
        rotation="-14.54 -25 0">
        <a-entity id="points-counter"
          points-counter="value: 000"
          gamestate-bind="points: points.value">
        </a-entity>
      </a-entity>
    </a-scene>
  </body>
</html>
