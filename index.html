<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>A-Shooter</title>
    <meta name="description" content="Room Scale A-Frame Demo">
    <script src="vendor/aframe.js"></script>
    <script src="build/build.js"></script>
  </head>
  <body>
    <a-scene
      debug="true"
      debug-ui="properties: shoot.bulletAcceleration movement-pattern.speed"
      gamestate="health: 5; wave: 1">
      <a-assets>
        <audio id="backgroundMusic" src="https://fernandojsg.github.io/a-shooter-assets/sounds/music0.ogg" loop></audio>
      </a-assets>

      <a-entity light="color: #79a8bb; groundColor: #fff; intensity: 0.2; type: hemisphere"></a-entity>
      <a-entity position="0 20 0" light="intensity: 1; distance: 25; type: point"></a-entity>
      <a-entity position="0 -20 0" light="intensity: 1; distance: 25; type: point"></a-entity>
      <a-entity position="0 5 -2" light="intensity: 0.6; type: point"></a-entity>

      <a-entity id="player"
        camera="userHeight: 1.6"
        wasd-controls
        look-controls
        shoot="direction: 0 0 -1; spaceKeyEnabled: true">
        <!-- sound="src: url(https://fernandojsg.github.io/a-shooter-assets/sounds/hit0.ogg); on: player-hit" -->

        <a-entity id="gameover"
          gamestate-bind="isGameOver: visible"
          visible="false"
        ></a-entity>

        <a-entity id="hurt"
          geometry="primitive: sphere; radius: 1"
          material="shader:flat; side: back; color: #f00; transparent: true; opacity: 0.0"
          visible="false">
          <a-animation id="player-hit-anim" attribute="material.opacity" to="0.8" from="0" begin="player-hit" direction="alternate" dur="300" repeat="1"></a-animation>
        </a-entity>
      </a-entity>

      <!-- Hands. -->
      <a-entity id="leftHand" shoot-controls="hand: left" weapon shoot></a-entity>
      <a-entity id="rightHand" shoot-controls="hand: right" weapon shoot></a-entity>

      <a-entity id="ground" json-model="src:url(https://fernandojsg.github.io/a-shooter-assets/models/platform.json);"></a-entity>
      <a-entity id="border" json-model="src:url(https://fernandojsg.github.io/a-shooter-assets/models/border.json);"></a-entity>
      <a-entity id="decos" json-model="src:url(https://fernandojsg.github.io/a-shooter-assets/models/decos.json);"></a-entity>

      <a-entity id="gamestateDebug"
        gamestate-debug
        position="-1 1 -3"></a-entity>

      <a-entity id="sky"
        geometry="primitive: sphere; radius: 200;"
        material="shader: flat; color: #1a4d5f; side: double; src: url(https://fernandojsg.github.io/a-shooter-assets/images/sky.jpg)"
      ></a-entity>

      <a-entity id="scoreboard"
        counter
        gamestate-bind="health: counter.health; points: counter.points"
        scale="0.1 0.1 0.1"
        obj-model="obj: url(https://fernandojsg.github.io/a-shooter-assets/models/counter.obj)"
        material="color: #fff"
      ></a-entity>
    </a-scene>
  </body>
</html>
